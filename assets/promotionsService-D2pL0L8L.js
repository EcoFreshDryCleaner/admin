import{G as i,H as m,I as h,C as a,J as n,A as d,K as l,L as e,M as w,N as y,O as f}from"./index-Bofk4aXo.js";const s=h(a,"promotions"),A=i(s,m("createdAt","desc"));i(s,n("active","==",!0),m("createdAt","desc"));const v=async r=>{try{return r.showModal&&await p(),(await y(s,{...r,createdAt:e(),updatedAt:e(),active:r.active!==void 0?r.active:!0})).id}catch(o){throw console.error("Error creating promotion:",o),o}},P=async(r,o)=>{try{o.showModal&&await p(r);const t=d(a,"promotions",r);return await l(t,{...o,updatedAt:e()}),!0}catch(t){throw console.error("Error updating promotion:",t),t}},M=async r=>{try{const o=d(a,"promotions",r);return await w(o),!0}catch(o){throw console.error("Error deleting promotion:",o),o}},R=async(r,o)=>{try{const t=d(a,"promotions",r);return await l(t,{active:!o,updatedAt:e()}),!0}catch(t){throw console.error("Error toggling promotion status:",t),t}},p=async(r=null)=>{try{const o=i(s,n("active","==",!0),n("showModal","==",!0)),u=(await f(o)).docs.filter(c=>c.id!==r).map(c=>l(c.ref,{showModal:!1,updatedAt:e()}));u.length>0&&await Promise.all(u)}catch(o){throw console.error("Error ensuring only one modal promotion:",o),o}};export{A as a,v as c,M as d,R as t,P as u};
