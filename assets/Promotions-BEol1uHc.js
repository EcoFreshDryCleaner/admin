import{i as D,r as F,j as C,g as _,l as h,k as M,o as a,a as t,b as r,p as P,f as p,q as m,c as l,F as g,m as A,t as c,n as b,d as n}from"./index-DQxOvujX.js";import{F as d}from"./index.es-DyG2QcrM.js";import{_ as S,a as N,t as $,d as E}from"./promotionsService-Biwp99oC.js";const V={class:"promotions-container"},B={class:"page-header"},q={class:"filters-section"},I={class:"filters-content"},O={class:"filters-grid"},U={class:"filter-item"},L={class:"filter-item"},T={class:"filter-item"},Y={class:"promotions-table-section"},j={class:"table-container"},z={key:0,class:"empty-state"},H={key:1,class:"table-wrapper"},Q={class:"promotions-table"},G={class:"table-cell"},J={class:"promotion-title"},K={class:"table-cell"},R={class:"promotion-description-text"},W={class:"table-cell"},X={class:"table-cell"},Z={key:0,class:"featured-badge"},tt={key:1,class:"empty-indicator"},st={class:"table-cell"},et={key:0,class:"modal-badge"},at={key:1,class:"empty-indicator"},ot={class:"table-cell"},lt={class:"date-text"},it={class:"table-cell"},ct={class:"action-buttons"},nt=["onClick","title"],dt=["onClick"],rt={class:"promotions-cards-section"},ut={key:0,class:"empty-state"},_t={key:1,class:"cards-grid"},vt={class:"card-header"},ht={class:"card-title"},bt={class:"card-status"},ft={class:"card-description"},pt={class:"description-text"},mt={class:"card-meta"},yt={class:"meta-item"},kt={key:0,class:"featured-badge"},wt={key:1,class:"meta-value"},gt={class:"meta-item"},At={key:0,class:"modal-badge"},xt={key:1,class:"meta-value"},Dt={class:"meta-item"},Ft={class:"meta-value"},Ct={class:"card-actions"},Mt=["onClick","title"],Pt={class:"btn-text"},St=["onClick"],Bt={__name:"Promotions",setup(Nt){const x=D(N),i=F({showActive:!1,showFeatured:!1,showModal:!1}),v=C(()=>{let o=x.value||[];return i.value.showActive&&(o=o.filter(s=>s.active)),i.value.showFeatured&&(o=o.filter(s=>s.featured)),i.value.showModal&&(o=o.filter(s=>s.showModal)),o.sort((s,u)=>new Date(u.createdAt?.toDate())-new Date(s.createdAt?.toDate()))}),y=o=>o?new Date(o.toDate()).toLocaleDateString():"-",k=async o=>{try{await $(o.id,o.active)}catch(s){console.error("Error toggling status:",s),alert("Failed to update promotion status")}},w=async o=>{if(confirm("Are you sure you want to delete this promotion?"))try{await E(o)}catch(s){console.error("Error deleting promotion:",s),alert("Failed to delete promotion")}};return(o,s)=>{const u=M("router-link");return a(),_(S,null,{default:h(()=>[t("div",V,[t("div",B,[s[4]||(s[4]=t("div",{class:"page-header-content"},[t("h1",{class:"page-title"},"Promotions"),t("p",{class:"page-subtitle"},"Manage your promotions and special offers")],-1)),r(u,{to:"/promotions/new",class:"add-promotion-btn"},{default:h(()=>[...s[3]||(s[3]=[P(" Add Promotion ",-1)])]),_:1})]),t("div",q,[t("div",I,[t("div",O,[t("div",U,[p(t("input",{id:"showActive","onUpdate:modelValue":s[0]||(s[0]=e=>i.value.showActive=e),type:"checkbox",class:"filter-checkbox"},null,512),[[m,i.value.showActive]]),s[5]||(s[5]=t("label",{for:"showActive",class:"filter-label"},"Show Active Only",-1))]),t("div",L,[p(t("input",{id:"showFeatured","onUpdate:modelValue":s[1]||(s[1]=e=>i.value.showFeatured=e),type:"checkbox",class:"filter-checkbox"},null,512),[[m,i.value.showFeatured]]),s[6]||(s[6]=t("label",{for:"showFeatured",class:"filter-label"},"Show Featured Only",-1))]),t("div",T,[p(t("input",{id:"showModal","onUpdate:modelValue":s[2]||(s[2]=e=>i.value.showModal=e),type:"checkbox",class:"filter-checkbox"},null,512),[[m,i.value.showModal]]),s[7]||(s[7]=t("label",{for:"showModal",class:"filter-label"},"Show Modal Only",-1))])])])]),t("div",Y,[t("div",j,[v.value.length===0?(a(),l("div",z,[...s[8]||(s[8]=[t("p",{class:"empty-text"},"No promotions found",-1)])])):(a(),l("div",H,[t("table",Q,[s[9]||(s[9]=t("thead",null,[t("tr",null,[t("th",{class:"table-header"},"Title"),t("th",{class:"table-header"},"Description"),t("th",{class:"table-header"},"Status"),t("th",{class:"table-header"},"Featured"),t("th",{class:"table-header"},"Modal"),t("th",{class:"table-header"},"Created"),t("th",{class:"table-header"},"Actions")])],-1)),t("tbody",null,[(a(!0),l(g,null,A(v.value,e=>(a(),l("tr",{key:e.id,class:"table-row"},[t("td",G,[t("div",J,c(e.title),1)]),t("td",K,[t("div",R,c(e.description),1)]),t("td",W,[t("span",{class:b(["status-badge",e.active?"status-active":"status-inactive"])},c(e.active?"Active":"Inactive"),3)]),t("td",X,[e.featured?(a(),l("span",Z,"Featured")):(a(),l("span",tt,"-"))]),t("td",st,[e.showModal?(a(),l("span",et,"Modal")):(a(),l("span",at,"-"))]),t("td",ot,[t("div",lt,c(y(e.createdAt)),1)]),t("td",it,[t("div",ct,[t("button",{onClick:f=>k(e),class:b(["action-btn",e.active?"action-btn-danger":"action-btn-success"]),title:e.active?"Deactivate":"Activate"},[e.active?(a(),_(n(d),{key:0,icon:"fa-solid fa-ban",class:"action-icon"})):(a(),_(n(d),{key:1,icon:"fa-solid fa-check",class:"action-icon"}))],10,nt),r(u,{to:`/promotions/edit/${e.id}`,class:"action-btn action-btn-secondary",title:"Edit"},{default:h(()=>[r(n(d),{icon:"fa-solid fa-pen-to-square",class:"action-icon"})]),_:2},1032,["to"]),t("button",{onClick:f=>w(e.id),class:"action-btn action-btn-danger",title:"Delete"},[r(n(d),{icon:"fa-solid fa-trash",class:"action-icon"})],8,dt)])])]))),128))])])]))])]),t("div",rt,[v.value.length===0?(a(),l("div",ut,[...s[10]||(s[10]=[t("p",{class:"empty-text"},"No promotions found",-1)])])):(a(),l("div",_t,[(a(!0),l(g,null,A(v.value,e=>(a(),l("div",{key:e.id,class:"promotion-card"},[t("div",vt,[t("h3",ht,c(e.title),1),t("div",bt,[t("span",{class:b(["status-badge",e.active?"status-active":"status-inactive"])},c(e.active?"Active":"Inactive"),3)])]),t("div",ft,[t("p",pt,c(e.description),1)]),t("div",mt,[t("div",yt,[s[11]||(s[11]=t("span",{class:"meta-label"},"Featured:",-1)),e.featured?(a(),l("span",kt,"Yes")):(a(),l("span",wt,"No"))]),t("div",gt,[s[12]||(s[12]=t("span",{class:"meta-label"},"Modal:",-1)),e.showModal?(a(),l("span",At,"Yes")):(a(),l("span",xt,"No"))]),t("div",Dt,[s[13]||(s[13]=t("span",{class:"meta-label"},"Created:",-1)),t("span",Ft,c(y(e.createdAt)),1)])]),t("div",Ct,[t("button",{onClick:f=>k(e),class:b(["card-btn",e.active?"card-btn-danger":"card-btn-success"]),title:e.active?"Deactivate":"Activate"},[e.active?(a(),_(n(d),{key:0,icon:"fa-solid fa-ban",class:"card-icon"})):(a(),_(n(d),{key:1,icon:"fa-solid fa-check",class:"card-icon"})),t("span",Pt,c(e.active?"Deactivate":"Activate"),1)],10,Mt),r(u,{to:`/promotions/edit/${e.id}`,class:"card-btn card-btn-secondary",title:"Edit"},{default:h(()=>[r(n(d),{icon:"fa-solid fa-pen-to-square",class:"card-icon"}),s[14]||(s[14]=t("span",{class:"btn-text"},"Edit",-1))]),_:2},1032,["to"]),t("button",{onClick:f=>w(e.id),class:"card-btn card-btn-danger",title:"Delete"},[r(n(d),{icon:"fa-solid fa-trash",class:"card-icon"}),s[15]||(s[15]=t("span",{class:"btn-text"},"Delete",-1))],8,St)])]))),128))]))])])]),_:1})}}};export{Bt as default};
