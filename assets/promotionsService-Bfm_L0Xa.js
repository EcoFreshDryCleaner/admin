import{E as i,G as m,H as h,B as a,I as n,z as d,J as l,K as e,L as w,M as y,N as f}from"./index-_H8X2coS.js";const s=h(a,"promotions"),v=i(s,m("createdAt","desc"));i(s,n("active","==",!0),m("createdAt","desc"));const A=async r=>{try{return r.showModal&&await p(),(await y(s,{...r,createdAt:e(),updatedAt:e(),active:r.active!==void 0?r.active:!0})).id}catch(o){throw console.error("Error creating promotion:",o),o}},P=async(r,o)=>{try{o.showModal&&await p(r);const t=d(a,"promotions",r);return await l(t,{...o,updatedAt:e()}),!0}catch(t){throw console.error("Error updating promotion:",t),t}},E=async r=>{try{const o=d(a,"promotions",r);return await w(o),!0}catch(o){throw console.error("Error deleting promotion:",o),o}},M=async(r,o)=>{try{const t=d(a,"promotions",r);return await l(t,{active:!o,updatedAt:e()}),!0}catch(t){throw console.error("Error toggling promotion status:",t),t}},p=async(r=null)=>{try{const o=i(s,n("active","==",!0),n("showModal","==",!0)),u=(await f(o)).docs.filter(c=>c.id!==r).map(c=>l(c.ref,{showModal:!1,updatedAt:e()}));u.length>0&&await Promise.all(u)}catch(o){throw console.error("Error ensuring only one modal promotion:",o),o}};export{v as a,A as c,E as d,M as t,P as u};
